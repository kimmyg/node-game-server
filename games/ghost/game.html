<!DOCTYPE html>
<html>

<head>
<script type="text/javascript">
function $( id ) {
	return document.getElementById( id );
}

window.onload = function( event ) {
	var ws = new WebSocket( 'ws://' + location.host + location.pathname );

	//ws.onopen = function( event ) {}

	ws.onmessage = function( event ) {
		var message = JSON.parse( event.data );

		if( message.type === '' ) {

		}
		if( message.type === 'turn' ) {
			$('status').innerText = 'It\'s your turn.';
		}


		else if( message.type === 'players' ) {
			for( var i = 0; i < message.players.length; ++i ) {
				var li = document.createElement( 'li' );
			
				li.id = message.players[i];
				li.innerText = message.players[i];
		
				$('players').appendChild( li );
			}
		}
		else if( message.type === 'add' ) {
			var li = document.createElement( 'li' );
				
			li.id = message.name;
			li.innerText = message.name;
			
			$('players').appendChild( li );
		}
		else if( message.type === 'remove' ) {
			$('players').removeChild( $( message.name ) );
		}
		else {
			console.log( 'unrecognized message type ' + message.type );
		}

	};

	//ws.onclose = function( event ) {}
	//ws.onerror = function( event ) {}
}
</script>
</head>

<body>
	<span id="word"></span>
	<div>
		<div>a</div>
		<div>a</div>
		<div>a</div>
		<div>a</div>
		<div>a</div>
		<div>a</div>
		<div>a</div>
		<div>a</div>
		<div>a</div>
		<div>a</div>
	</div>
	<div>
		<div>challenge</div>
		<div>declare</div>
	</div>
	<div>
		<div>Is this a word?</div>
		<div>Yes</div>
		<div>No</div>
	</div>
	<div>It's your turn./It's kimmyg's turn.</div>
		<div>Waiting on you and two others./Waiting on you./Waiting on two others.</div>
	<div id="status"></div>
</body>

</html>
